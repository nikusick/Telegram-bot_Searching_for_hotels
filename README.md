# Telegram-bot_Searching_for_hotels
![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)
![SQLite](https://img.shields.io/badge/sqlite-%2307405e.svg?style=for-the-badge&logo=sqlite&logoColor=white)
![PyCharm](https://img.shields.io/badge/pycharm-143?style=for-the-badge&logo=pycharm&logoColor=black&color=black&labelColor=green)


![Bot API](https://img.shields.io/badge/pyTelegramBotAPI-4.9.0-blue)
[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)

Бот найдёт лучшие отели согласно вашему запросу<br>
Бот: @SearchingForHotelsBot 
| :exclamation:  В данный момент поиск по России недоступен.   |
|-----------------------------------------|
## Начало работы

### Установка и запуск
Запуск бота осуществляется после клонирования репозитория и установки необходимых библиотек.
```console
$ git clone https://github.com/nikusick/Telegram-bot_Searching_for_hotels.git
$ pip install -r requirements.txt
$ python main.py
```
*Примечание: в файле .env укажите токен своего бота и ключ для rapidapi.com*

## Использование

### Список команд бота:

* /start - Запустить бота
* /help - Вывести справку
* /low - Вывести топ дешевых номеров
* /high - Вывести топ дорогих номеров
* /custom - Поиск номеров в определенном диапазоне
* /history - Вывести историю запросов
* /cancel - Отменить последний запрос

## Описание поисковых сценариев

#### Примечание
Для удобства ввода дат заезда и выезда был использован встроенный календарь: 

![image](https://github.com/nikusick/Telegram-bot_Searching_for_hotels/assets/91880536/6fea58a8-433a-44c3-a011-c2e4b0bc0e3d)

### Описание сценария работы команд low, high

| Шаг                                                       | Способ ответа          | Ограничения                                                                                              |
|-----------------------------------------------------------|-----------------------|-----------------------------------------------------------------------------------------------------------|
| Ввести город для поиска                                   | текстовое сообщение   | -                                                                                                         |
| Ввести количество отелей для поиска                       | текстовое сообщение   | число не более 10                                                                                         |
| Ввести дату заезда                                        | встроеннай календарь  | -                                                                                                         |
| Ввести дату выезда                                        | встроеннай календарь  | -                                                                                                         |

### Описание сценария работы команды custom

| Шаг                                                       | Способ ответа          | Ограничения                                                                                              |
|-----------------------------------------------------------|-----------------------|-----------------------------------------------------------------------------------------------------------|
| Ввести город для поиска                                   | текстовое сообщение   | -                                                                                                         |
| Ввести количество отелей для поиска                       | текстовое сообщение   | число не более 10                                                                                         |
| Ввести дату заезда                                        | встроеннай календарь  | -                                                                                                         |
| Ввести дату выезда                                        | встроеннай календарь  | -                                                                                                         |
| Ввод минимальной стоимости за ночь                        | текстовое сообщение   | число                                                                                                     |
| Ввод максимальной стоимости за ночь                       | текстовое сообщение   | число                                                                                                     |


## Результаты:

В случае успешного поиска отелей по требуемым параметрам, бот выведет информацию о каждом отеле в отдельном сообщении.
Сообщение содержит:
* Название отеля
* Рейтинг
* Адрес 
* Стоимость за ночь
* Фотографии

Пример результата:

![image](https://github.com/nikusick/Telegram-bot_Searching_for_hotels/assets/91880536/9f3646e8-11eb-4f45-ad2a-472a3d112de3)

### Описание сценария работы команды history

Для сохранения результатов поиска пользователей используется база данных SQLite. <br>
При запуске скрипт создает БД и таблицу queries. <br>
Запись в базу производится после отправки пользователю всех сообщений, которые были сформированы в рамках его запроса. <br>

При выполнении команды /history в БД производится поиск последних 10 записей, ассоциированных с telegram_id пользователя.
Каждое сообщение содержит:

* Команду запроса
* Локацию
* Даты заезда и выезда
* Результаты запроса

## Автор проекта
Сибова Вероника — Python developer
- [Telegram](https://web.telegram.org/k/): @nikusick888
- e-mail: nika.sibova.03@inbox.ru
